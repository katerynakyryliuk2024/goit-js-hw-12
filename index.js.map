{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgİnfo => {\n  return `\n    <li class='gallery-card'>\n    <a class='gallery-link' href='${imgİnfo.largeImageURL}'>\n    <img class='galley-img' src='${imgİnfo.webformatURL}' alt='${imgİnfo.tags}' width='360'  '/>\n    </a>\n    <div class='description'>\n    <p>Likes: ${imgİnfo.likes}</p>\n    <p>Views: ${imgİnfo.views}</p> \n    <p>Comments: ${imgİnfo.comments}</p>\n    <p> Downloads: ${imgİnfo.downloads}</p>\n    </div>\n    </li>\n    `;\n};\n","import axios from 'axios';\nexport const fetchByQuery = (searchedQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: '48282241-c94e9d668c7a92092d53abf55',\n      q: searchedQuery,\n      page: currentPage,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  };\n\n  return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchByQuery } from './js/pixabay-api';\n\nconst searchFormEl = document.querySelector('.search-form');\n\nconst galleryEl = document.querySelector('.gallery');\n\nconst loader = document.querySelector('.loader');\n\nconst loadMoreBtnEl = document.querySelector('.load-more-btn');\n\nconst cardSize = document.querySelector('.gallery-card');\n\nlet page = 1;\nlet searchedQuery = '';\n\nloader.style.display = 'none';\n\nconst onSearchFormSubmit = async event => {\n  loader.style.display = 'inline-block';\n\n  try {\n    event.preventDefault();\n\n    searchedQuery = event.currentTarget.elements.search_input.value.trim();\n\n    if (searchedQuery === '') {\n      iziToast.warning({\n        title: 'Caution',\n        message: 'You forgot to full fill searching area',\n      });\n      return;\n    }\n\n    page = 1;\n\n    loadMoreBtnEl.classList.add('is-hidden');\n\n    const { data } = await fetchByQuery(searchedQuery, page);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n\n      galleryEl.innerHTML = '';\n\n      searchFormEl.reset();\n\n      return;\n    }\n\n    if (data.total > 10) {\n      loadMoreBtnEl.classList.remove('is-hidden');\n      loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.innerHTML = galleryTemplate;\n\n    const gallerySLB = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captions: true,\n      captionDelay: 250,\n    });\n\n    gallerySLB.refresh();\n  } catch (error) {\n    if (error.message === '404') {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    console.log(error);\n  } finally {\n    loader.style.display = 'none';\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n  loader.style.display = 'inline-block';\n  page += 1;\n  try {\n    const { data } = await fetchByQuery(searchedQuery, page);\n    console.dir({ data });\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    let cardHeight = cardSize.getBoundingClientRect();\n\n    const scrollHeight = 2 * cardHeight;\n\n    window.scrollBy({\n      top: scrollHeight,\n      behavior: 'smooth',\n    });\n\n    const lastPage = Math.ceil(data.totalHits / 15);\n\n    if (page === lastPage) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n      iziToast.info({\n        message:\n          'We are sorry, but you have reached the end of search results.',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.style.display = 'none';\n  }\n};\n"],"names":["createGalleryCardTemplate","imgİnfo","fetchByQuery","searchedQuery","currentPage","axiosOptions","axios","searchFormEl","galleryEl","loader","loadMoreBtnEl","cardSize","page","onSearchFormSubmit","event","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","SimpleLightbox","error","scrollHeight","lastPage"],"mappings":"owBAAO,MAAMA,EAA4BC,GAChC;AAAA;AAAA,oCAE2BA,EAAQ,aAAa;AAAA,mCACtBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,gBAG7DA,EAAQ,KAAK;AAAA,gBACbA,EAAQ,KAAK;AAAA,mBACVA,EAAQ,QAAQ;AAAA,qBACdA,EAAQ,SAAS;AAAA;AAAA;AAAA,MCTzBC,EAAe,CAACC,EAAeC,IAAgB,CAC1D,MAAMC,EAAe,CACnB,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,KAAMC,EACN,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,MACb,CACL,EAEE,OAAOE,EAAM,IAAI,2BAA4BD,CAAY,CAC3D,ECPME,EAAe,SAAS,cAAc,cAAc,EAEpDC,EAAY,SAAS,cAAc,UAAU,EAE7CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAgB,SAAS,cAAc,gBAAgB,EAEvDC,EAAW,SAAS,cAAc,eAAe,EAEvD,IAAIC,EAAO,EACPT,EAAgB,GAEpBM,EAAO,MAAM,QAAU,OAEvB,MAAMI,EAAqB,MAAMC,GAAS,CACxCL,EAAO,MAAM,QAAU,eAEvB,GAAI,CAKF,GAJAK,EAAM,eAAc,EAEpBX,EAAgBW,EAAM,cAAc,SAAS,aAAa,MAAM,OAE5DX,IAAkB,GAAI,CACxBY,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,wCACjB,CAAO,EACD,MACD,CAEDH,EAAO,EAEPF,EAAc,UAAU,IAAI,WAAW,EAEvC,KAAM,CAAE,KAAAM,CAAI,EAAK,MAAMd,EAAaC,EAAeS,CAAI,EAEvD,GAAII,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACV,CAAO,EAEDP,EAAU,UAAY,GAEtBD,EAAa,MAAK,EAElB,MACD,CAEGS,EAAK,MAAQ,KACfN,EAAc,UAAU,OAAO,WAAW,EAC1CA,EAAc,iBAAiB,QAASO,CAAkB,GAG5D,MAAMC,EAAkBF,EAAK,KAC1B,IAAIG,GAAMnB,EAA0BmB,CAAE,CAAC,EACvC,KAAK,EAAE,EAEVX,EAAU,UAAYU,EAEH,IAAIE,EAAe,aAAc,CAClD,aAAc,MACd,SAAU,GACV,aAAc,GACpB,CAAK,EAEU,QAAO,CACnB,OAAQC,EAAO,CACVA,EAAM,UAAY,OACpBN,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACV,CAAO,EAEH,QAAQ,IAAIM,CAAK,CACrB,QAAY,CACRZ,EAAO,MAAM,QAAU,MACxB,CACH,EAEAF,EAAa,iBAAiB,SAAUM,CAAkB,EAE1D,MAAMI,EAAqB,MAAMH,GAAS,CACxCL,EAAO,MAAM,QAAU,eACvBG,GAAQ,EACR,GAAI,CACF,KAAM,CAAE,KAAAI,CAAI,EAAK,MAAMd,EAAaC,EAAeS,CAAI,EACvD,QAAQ,IAAI,CAAE,KAAAI,CAAI,CAAE,EAEpB,MAAME,EAAkBF,EAAK,KAC1B,IAAIG,GAAMnB,EAA0BmB,CAAE,CAAC,EACvC,KAAK,EAAE,EAEVX,EAAU,mBAAmB,YAAaU,CAAe,EAIzD,MAAMI,EAAe,EAFJX,EAAS,wBAI1B,OAAO,SAAS,CACd,IAAKW,EACL,SAAU,QAChB,CAAK,EAED,MAAMC,EAAW,KAAK,KAAKP,EAAK,UAAY,EAAE,EAE1CJ,IAASW,IACXb,EAAc,UAAU,IAAI,WAAW,EACvCA,EAAc,oBAAoB,QAASO,CAAkB,EAC7DF,EAAS,KAAK,CACZ,QACE,+DACV,CAAO,EAEJ,OAAQM,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRZ,EAAO,MAAM,QAAU,MACxB,CACH"}